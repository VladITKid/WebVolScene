$volsceneColor: #666666;
$tshortColor: #4B5BABFF;
$pantsColor: #473B78FF;
$skinColor: #FFB570FF;
$hairColor: #422445FF;
$vwMultiplier: 1.2vw;

body {
    background-color: $volsceneColor;
    display: flex;
    justify-content: center;
}

// * Анимация Walking
// Вращение головы
@keyframes volhuman-walking-head {
    0%, 100% {
        transform: 
            rotateY(-15deg)
            translateY(-8*$vwMultiplier);
    }
    50% {
        transform:
            rotateY(15deg)
            translateY(-8*$vwMultiplier);
    }
}
// Движение рук
@keyframes volhuman-walking-hand-left {
    0%, 100% {
        transform: 
            rotateX(10deg)
            translateX(8*$vwMultiplier);
    }
    50% {
        transform: 
            rotateX(-10deg)
            translateX(8*$vwMultiplier);
    }
}
@keyframes volhuman-walking-hand-right {
    0%, 100% {
        transform: 
            rotateX(-10deg)
            translateX(-4*$vwMultiplier);
    }
    50% {
        transform: 
            rotateX(10deg)
            translateX(-4*$vwMultiplier);
    }
}
// Движение ног
@keyframes volhuman-walking-leg-left {
    0%, 100% {
        transform:
            rotateX(-10deg)
            translateX(4*$vwMultiplier)
            translateY(12.2*$vwMultiplier)
            translateZ(2*$vwMultiplier)
            ;
    }
    50% {
        transform:
            rotateX(10deg)
            translateX(4*$vwMultiplier)
            translateY(12.2*$vwMultiplier)
            translateZ(-2*$vwMultiplier)
            ;
        }
    }
@keyframes volhuman-walking-leg-right {
    0%, 100% {
        transform: 
            rotateX(10deg)
            translateX(0*$vwMultiplier)
            translateY(12.2*$vwMultiplier)
            translateZ(-2*$vwMultiplier)
            ;
    }
    50% {
        transform: 
            rotateX(-10deg)
            translateX(0*$vwMultiplier)
            translateY(12.2*$vwMultiplier)
            translateZ(2*$vwMultiplier)
            ;
    }
}

// * Анимация Lightsaber

@keyframes volhuman-lightsaber-hand-right {
    
}

// Миксин выбора анимации для каждого меша
@mixin volhuman-animation($animation, $meshName) {
    @if($animation == 'walking') {
        &--walking {
            animation-duration: 2s;
            animation-timing-function: linear;
            animation-iteration-count: infinite;

            @if($meshName == 'head') {
                animation-name: volhuman-walking-head;
            }
            @else if($meshName == 'hand--left') {
                animation-name: volhuman-walking-hand-left;
            }
            @else if($meshName == 'hand--right') {
                animation-name: volhuman-walking-hand-right;
            }
            @else if($meshName == 'leg--left') {
                animation-name: volhuman-walking-leg-left;
            }
            @else if($meshName == 'leg--right') {
                animation-name: volhuman-walking-leg-right;
            }
        }
    }
}

// Миксин размера плоскостей мешей
@mixin rect-size($parentMesh, $rectSize) {
    @if ($parentMesh == 'head') {
        @if ($rectSize == 'equal') {
            height: 8*$vwMultiplier;
            width: 8*$vwMultiplier;
        }
    }
    @else if ($parentMesh == 'body') {
        @if ($rectSize == 'wide') {
            height: 12*$vwMultiplier;
            width: 8*$vwMultiplier;
        } @else if ($rectSize == 'narrow') {
            height: 12*$vwMultiplier;
            width: 4*$vwMultiplier;
        } @else if ($rectSize == 'small') {
            height: 4*$vwMultiplier;
            width: 8*$vwMultiplier;
        }
    }
    @else if ($parentMesh == 'limb') {
        @if ($rectSize == 'wide') {
            height: 12*$vwMultiplier;
            width: 4*$vwMultiplier;
        } @else if ($rectSize == 'narrow') {
            height: 12*$vwMultiplier;
            width: 4*$vwMultiplier;
        } @else if ($rectSize == 'small') {
            height: 4*$vwMultiplier;
            width: 4*$vwMultiplier;
        }
    }
}

// Сцена с 3D моделями
.volscene {
    grid-column: 2;
    position: relative;
    height: 40*$vwMultiplier;
    width: 40*$vwMultiplier;
    font-size: 12px;
    background-image: radial-gradient(center, #ffffff3b 0% 20%, transparent 70% 100%);
}

// 3D Объект
.volmodel {
    position: absolute;    
    display: flex;
    flex-direction: column;
    justify-content: center;

    //  Делаю все 3D объекты под углом
    transform-style: preserve-3d;
    transform: 
        rotateX(-45deg)
        rotateY(-45deg);
}

// Меш 3D объекта
.mesh {
    transform-style: preserve-3d;
    &__rect {
        position: absolute;
        display: flex;
        justify-content: center;
        align-items: center;
        background-repeat: no-repeat;
        background-size: contain;
        image-rendering: pixelated;
        border: .1*$vwMultiplier solid $volsceneColor;
        background-color: #05a500b5;
    }
}

// 3D Человек
.volhuman {
    bottom: 5*$vwMultiplier;
    right: 16*$vwMultiplier;
    width: 8*$vwMultiplier;
    height: inherit;

    // Голова
    &__head {
        z-index: 6;
        transform: translateY(-8*$vwMultiplier); // Положение относительно тела
        @include volhuman-animation('walking', 'head');

        &-rect {
            &--front {
                @include rect-size("head", "equal");
                transform: translateZ(4*$vwMultiplier);
                background-image: url('face.gif');
            }
            &--back {
                @include rect-size("head", "equal");
                transform: translateZ(-4*$vwMultiplier);
                background-image: url('headBack.png');
            }
            &--top {
                @include rect-size("head", "equal");
                transform: translateY(-4*$vwMultiplier) rotateX(-90deg);
                background-color: $hairColor;
            }
            &--bottom {
                @include rect-size("head", "equal");
                transform: translateY(4*$vwMultiplier) rotateX(90deg);
                background-color: $skinColor;
            }
            &--right {
                @include rect-size("head", "equal");
                transform: translateX(4*$vwMultiplier) rotateY(90deg);
                background-image: url('headSide.png');
            }
            &--left {
                @include rect-size("head", "equal");
                transform: translateX(-4*$vwMultiplier) rotateY(90deg);
                background-image: url('headSide.png');
            }
        }
    }

    // Тело
    &__body {
        z-index: 5;
        &-rect {
            @mixin textureMixin {
                background-image: 
                linear-gradient(180deg,
                    $tshortColor 0 10*$vwMultiplier,
                    $pantsColor 10*$vwMultiplier 12*$vwMultiplier
                );
            }

            &--front {
                @include rect-size("body", "wide");
                transform: translateZ(2*$vwMultiplier);
                @include textureMixin;
            }
            &--back {
                @include rect-size("body", "wide");
                transform: translateZ(-2*$vwMultiplier);
                @include textureMixin;
            }
            &--top {
                @include rect-size("body", "small");
                transform: translateY(-2*$vwMultiplier) rotateX(-90deg);
            }
            &--bottom {
                @include rect-size("body", "small");
                transform: translateY(10*$vwMultiplier) rotateX(90deg);
                background-color: $pantsColor;
            }
            &--right {
                @include rect-size("body", "narrow");
                transform: translateX(6*$vwMultiplier) rotateY(-90deg);
                @include textureMixin;
            }
            &--left {
                @include rect-size("body", "narrow");
                transform: translateX(-2*$vwMultiplier) rotateY(90deg);
                @include textureMixin;
            }
        }
    }

    // Руки
    &__hand {
        &--left {
            z-index: 5;
            transform: translateX(8*$vwMultiplier); // Положение относительно тела
            @include volhuman-animation('walking', 'hand--left');
        }
        &--right {
            z-index: 4;
            transform: translateX(-4*$vwMultiplier);// Положение относительно тела
            @include volhuman-animation('walking', 'hand--right');
        }

        &-rect {
            @mixin textureMixin {
                background-image: 
                linear-gradient(180deg,
                    $tshortColor 0 4*$vwMultiplier,
                    $skinColor 4*$vwMultiplier 12*$vwMultiplier
                );
            }
            &--front {
                @include rect-size("limb", "wide");
                transform: translateZ(2*$vwMultiplier);
                @include textureMixin;
            }
            &--back {
                @include rect-size("limb", "wide");
                transform: translateZ(-2*$vwMultiplier);
                @include textureMixin;
            }
            &--top {
                @include rect-size("limb", "small");
                transform: translateY(-2*$vwMultiplier) rotateX(-90deg);
                background-color: $tshortColor;
            }
            &--bottom {
                @include rect-size("limb", "small");
                transform: translateY(10*$vwMultiplier) rotateX(90deg);
                background-color: $skinColor;
            }
            &--right {
                @include rect-size("limb", "narrow");
                transform: translateX(2*$vwMultiplier) rotateY(-90deg);
                @include textureMixin;
            }
            &--left {
                @include rect-size("limb", "narrow");
                transform: translateX(-2*$vwMultiplier) rotateY(90deg);
                @include textureMixin;
            }
        }
    }

    // Ноги
    &__leg {
        &--left {
            z-index: 2;
            // Положение относительно тела
            transform: 
                translateX(4*$vwMultiplier)
                translateY(12*$vwMultiplier);
            @include volhuman-animation('walking', 'leg--left');
        }
        &--right {
            z-index: 3;
            // Положение относительно тела
            transform: 
                translateX(0*$vwMultiplier)
                translateY(12*$vwMultiplier);
            @include volhuman-animation('walking', 'leg--right');
        }

        &-rect {
            background-color: $pantsColor;
            &--front {
                @include rect-size("limb", "wide");
                transform: translateZ(2*$vwMultiplier);
            }
            &--back {
                @include rect-size("limb", "wide");
                transform: translateZ(-2*$vwMultiplier);
            }
            &--top {
                @include rect-size("limb", "small");
                transform: translateY(-2*$vwMultiplier) rotateX(-90deg);
            }
            &--bottom {
                @include rect-size("limb", "small");
                transform: translateY(10*$vwMultiplier) rotateX(90deg);
            }
            &--right {
                @include rect-size("limb", "narrow");
                transform: translateX(2*$vwMultiplier) rotateY(-90deg);
            }
            &--left {
                @include rect-size("limb", "narrow");
                transform: translateX(-2*$vwMultiplier) rotateY(90deg);
            }
        }
    }
}